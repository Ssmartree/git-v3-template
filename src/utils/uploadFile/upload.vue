<!-- <script setup>
import { ref } from 'vue'
import { downloadFile, uploadFile } from './fileSystem' // å¼•å…¥å¤–éƒ¨æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½

// åˆ›å»ºå“åº”å¼å˜é‡
const uploadProgress = ref(0)
const downloadProgress = ref(0)

// å¤–éƒ¨å®šä¹‰çš„å›è°ƒå‡½æ•°
function handleUploadProgress(progress) {
  uploadProgress.value = progress
}

function handleUploadComplete(result) {
  console.log(`Upload complete: ${result}`)
}

function handleDownloadProgress(progress) {
  downloadProgress.value = progress
  const { action, result } = e.data

  worker.onmessage = function (e) {
    const { action, result } = e.data

    if (action === 'complete') {
      const { file, fileName } = result

      // åˆ›å»º Blob URL
      const blobUrl = URL.createObjectURL(file)

      // åˆ›å»ºéšè—ä¸‹è½½é“¾æ¥
      const a = document.createElement('a')
      a.href = blobUrl
      a.download = fileName || 'download.bin'
      a.click()

      // é‡Šæ”¾ URL
      URL.revokeObjectURL(blobUrl)
    }
  }

}

function handleDownloadComplete(result) {
  console.log(`Download complete: ${result}`)
}

// é€‰æ‹©æ–‡ä»¶åçš„å›è°ƒ
function onFileChange(event) {
  const file = event.target.files[0]
  if (file) {
    // ä¸Šä¼ æ–‡ä»¶æ—¶çš„å›è°ƒå‡½æ•°
    uploadFile({ file, uploadUrl: 'https://your-upload-api.com/upload', chunkSize: 1024 * 1024 }, handleUploadProgress, handleUploadComplete)
  }
  else {
    // alert('Please select a file to upload.')
  }
}

// ä¸Šä¼ æ–‡ä»¶
function uploadFileHandler() {
  const fileInput = document.getElementById('fileInput')
  const file = fileInput.files[0]
  if (file) {
    uploadFile({
      file,
      uploadUrl: 'https://your-upload-api.com/upload',
      chunkSize: 1024 * 1024,
    }, handleUploadProgress, handleUploadComplete)
  }
}
console.log('ğŸš€ ~ uploadFileHandler', uploadFileHandler)

// ä¸‹è½½æ–‡ä»¶
function downloadFileHandler() {
  downloadFile({
    url: 'https://your-download-api.com/file',
    chunkSize: 1024 * 1024,
  }, handleDownloadProgress, handleDownloadComplete)
}
console.log('ğŸš€ ~ downloadFileHandler', downloadFileHandler)
</script>

<template>
  <div>
    <h1>File Upload and Download Example</h1>

    <div>
      <h2>Upload File</h2>
      <input type="file" @change="onFileChange" />
      <button @click="uploadFile">
        Upload
      </button>
      <progress v-if="uploadProgress" :value="uploadProgress" max="100"></progress>
    </div>

    <div>
      <h2>Download File</h2>
      <button @click="downloadFile">
        Download
      </button>
      <progress v-if="downloadProgress" :value="downloadProgress" max="100"></progress>
    </div>
  </div>
</template> -->
